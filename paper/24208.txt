NBER WORKING PAPER SERIES

A SUFFICIENT STATISTICS APPROACH FOR AGGREGATING FIRM-LEVEL
EXPERIMENTS
David Sraer
David Thesmar
Working Paper 24208
http://www.nber.org/papers/w24208

NATIONAL BUREAU OF ECONOMIC RESEARCH
1050 Massachusetts Avenue
Cambridge, MA 02138
January 2018

We gratefully acknowledge comments and suggestions from Laurent Fresard, Ben Hebert
(discussant), Valentin Haddad, Erik Loualliche, Martin Lettau, John Nash as well as seminar
participants at UT Austin, UC Berkeley, Columbia, Cornell, HKUST, Maryland, NYU,
University of Minnesota, UCLA, Michigan, MIT, Stanford, Washington University in Saint
Louis and at the Econometric Society meetings in Philadelphia. All remaining errors are our own.
The views expressed herein are those of the authors and do not necessarily reflect the views of the
National Bureau of Economic Research.
NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.
© 2018 by David Sraer and David Thesmar. All rights reserved. Short sections of text, not to
exceed two paragraphs, may be quoted without explicit permission provided that full credit,
including © notice, is given to the source.

A Sufficient Statistics Approach for Aggregating Firm-Level Experiments
David Sraer and David Thesmar
NBER Working Paper No. 24208
January 2018
JEL No. E2,E22,G0,G3,G30,G32
ABSTRACT
We consider a dynamic economy populated by heterogeneous firms subject to generic capital
frictions: adjustment costs, taxes and financing constraints. A random subset of firms in this
economy receives an empirical "treatment", which modifies the parameters governing these
frictions. An econometrician observes the firm-level response to this treatment, and wishes to
calculate how macroeconomic outcomes would change if all firms in the economy were treated.
Our paper proposes a simple methodology to estimate this aggregate counterfactual using firmlevel evidence only. Our approach takes general equilibrium effects into account, requires neither
a structural estimation nor a precise knowledge on the exact nature of the experiment and can be
implemented using simple moments of the distribution of revenue-to-capital ratios. We provide a
set of sufficient conditions under which these formulas are valid and investigate the robustness of
our approach to multiple variations in the aggregation framework.

David Sraer
Haas School of Business
University of California, Berkeley
545 Student Services Building
Berkeley, CA 94720-1900
and NBER
sraer@berkeley.edu
David Thesmar
MIT Sloan
100 Main Street
02478 Cambridge MA
thesmar@mit.edu

1

Introduction

Governments around the world have a wide range of policies to facilitate business investment and growth. A burgeoning empirical literature seeks to evaluate the effectiveness
of these policies using firm-level data and well-identified empirical settings. Some papers
look at financial market liberalizations (see for instance Aghion et al. (2007), Bertrand
et al. (2007), Larrain and Stumpner (2017)). Others analyze firm response to the availability of subsidized credit (e.g. Lelarge et al. (2010), Banerjee and Duflo (2014), Brown
and Earle (2017)), or changes in bank lending behavior (Fraisse et al. (2017), Blattner
et al. (2017)). Another set of papers study the effect of capital taxes or subsidies on firm
investment and hiring (Yagan (2015), Zwick and Mahon (2015), Rauh (2006), Rotemberg
(2017)). By comparing treated firms to a plausibly exogenous control group, these papers
quantify the relative effect of these policy interventions on treated firms. However, they
remain silent on how these firm-level effects would aggregate, were the intervention generalized to a broader set of firms. In this paper, we offer simple formulas to estimate such
an aggregate counterfactual using firm-level evidence. This approach does not require the
estimation of a structural model of firm behavior and, in particular, does not require that
the empiricist precisely knows how the intervention affects firm-level distortions.
Aggregating firm-level responses to these policies is a non-trivial exercise because it
requires an explicit modeling of how firms and workers interact with one another. First,
standard general equilibrium (GE) effects will typically dampen firm-level responses: for
instance, if a growth-enhancing policy is extended to a larger set of firms, labor demand
increases, which in turn raises the equilibrium wage and mitigates the initial direct effect.
Second, extending the policy to a larger scale reallocates inputs across firms: as distortions
are reduced, capital and labor flow from firms with low marginal productivity to firms with
high marginal productivity, which leads to an increase in aggregate productivity.
To account for such equilibrium effects and map firm-level estimates into aggregate outcomes, we proceed in three steps. First, we set up a general equilibrium (GE) model with
heterogeneous firms who face stochastic productivity shocks and are subject to several
forms of distortions: adjustment costs, taxes and financing frictions. We relate aggregate
output and total factor productivity (TFP) to the economy-wide distribution of revenue to
capital ratios. Under some assumptions, the distribution of the revenue to capital ratio1
1

The revenue to capital ratio is commonly called “marginal revenue product of capital” (MRPK) or equivalently “capital wedge” in the misallocation literature (Restuccia and Rogerson (2008), Hsieh and Klenow
(2009)).

2

captures the extent of distortions in the economy: A firm with a relatively high revenue
to capital ratio is a firm that invests too little, because of adjustment costs, financing constraints or taxes. The distribution of revenue to capital ratios is not a deep structural
parameter, in the sense that it depends on firms’ histories and choices. But the effect of
a given policy on this distribution can easily be estimated using standard datasets and a
well-designed experimental setting.
In a second step, we introduce such an empirical setting into our model. We assume
that a policy intervention targets a random subset of firms in the economy. This treatment
affects parameters governing firm-level frictions, but we do not need to specify which ones
exactly. Using firm-level data, we assume that an econometrician estimates the effect of
such a treatment on the distribution of revenue to capital ratios (e.g., its mean and variance, or its covariance with firm-level productivity). A natural solution to the aggregation
exercise we consider – computing the effect of a generalization of the policy to all firms in
the economy – is then to simply plug in the estimated treatment effect of the policy on the
distribution of revenue to capital ratios into the aggregation formulas described above. But
this solution, adopted by a few recent papers (Larrain and Stumpner (2017), Rotemberg
(2017) and Blattner et al. (2017)) and which follows the insight of Restuccia and Rogerson
(2008) and Hsieh and Klenow (2009), takes the distribution of revenue to capital ratios as
independent of the market equilibrium.
However, in principle, the distribution of these capital wedges can depend on the market
equilibrium. For instance, with a higher wage in the labor market, firms are less profitable
and hence more financially constrained, which may result in a different distribution of
revenue to capital ratios. This scale-dependence is a significant threat to the methodology
outlined above. To see this, consider a policy that relaxes financing constraints for a small
subset of firms in the economy. The econometrician estimates a significant reduction in
the mean and variance of revenue to capital ratio for treated firms, implying that the policy boosts firm-level efficiency and improves the allocation of capital within treated firms.
These treatment effects are the firm-level estimates that one would like to plug in the aggregation formulas. However, as this policy is generalized to more firms in the economy,
labor demand goes up, which leads to an increase in the equilibrium wage in the labor
market. Since firms are on average more constrained, the firm-level statistics estimated in
the economy where only a small number of firms are treated could not be valid anymore.2
The bottom-line is that the revenue to capital ratios measured in a particular experiment
2

for instance, reducing firm-level frictions may lead to a greater reduction in the average revenue to
capital ratio when the equilibrium wage is higher

3

are only observed conditional on current equilibrium conditions, and may not be used in
alternative counterfactuals.
A key contribution in this paper is to provide conditions under which the revenue to
capital ratio is independent of general equilibrium conditions. This property allows us to
safely use the estimated effect of the policy into the formulas for GE outcome. It relies on
two key assumptions. First, the sources of distortions (financing frictions, tax schedules,
adjustment costs) are assumed to be homogeneous of degree 1. The intuition for this is
that homogeneity guarantees that frictions remain on average constant on a size-adjusted
basis. Hence, a change in general equilibrium, which affects firm size, will not affect distortions. This assumption is only mildly restrictive and consistent with most models of firm
dynamics used in macro-finance. The second assumption is the firm-level Cobb-Douglas
production function, which is another common assumption in the literature.
The formulas we obtain for aggregate output and TFP combine parameters of the macroeconomic model (labor share, goods substitutability, labor supply elasticity) and three sufficient statistics for the joint distribution of log productivity and log revenue to capital. The
first statistic is the effect of the treatment on average log wedge. It captures the extent
to which the treatment affects the aggregate amount of savings available to firms. The
second statistic is the treatment effect on the variance of log wedges. It measures how the
treatment distorts the allocation of capital across firms. The final statistic is the treatment
effect on the covariance of log wedges and log productivities. Intuitively, if the treatment
reduces this covariance, it will make the productive firms relatively less distorted which is
good for aggregate output.
We then consider a series of relevant extensions to the basic setup and show how our
aggregation formulas extend to these different settings. First, our formulas can easily
accommodate the situation where the aggregation exercise is partial, in the sense that
in the counterfactual, only a larger subset of firms – instead of all firms – receive the
treatment. This is a relevant extension since in many settings (e.g., small firms subsidies),
the policy focuses by design on a subset of firms, so that the relevant aggregation should
be done within this subset. Second, we allow for a more realistic market structure, where
firms imperfectly compete within industries, which are allowed to be heterogeneous in
terms of their labor shares, price elasticity of demand, and total output shares. Third, we
allow for decreasing returns to scale in production. Finally, we provide formulas that make
no parametric assumptions about the distribution of revenue to capital ratios.
Our paper is first and foremost of interest for the growing literature that empirically

4

analyzes firm-level distortions using experimental-like settings. Many of the papers cited
above estimate the firm-level effect of policies promoting business investment but do not
speak to how these policies would affect macroeconomic outcome were the policy extended
to all firms in the economy. Our paper provides a simple framework to answer this question
using similar identification strategies but focusing on a set of sufficient statistics typically
not computed in these studies (mean log revenue to capital ratio, its variance, and its covariance with log productivity). Recent exceptions are Blattner et al. (2017), Rotemberg
(2017) and Larrain and Stumpner (2017), who consider an aggregation framework somewhat similar to ours, but in which the distribution of revenue to capital ratios are assumed
to be exogenous, and in particular independent of aggregate conditions. One of our contributions is to provide sufficient conditions under which endogenous capital wedges are
in fact independent of the market equilibrium. Our paper is also related to the rising literature that seeks to bridge reduced form analysis and structural approach by isolating
simple “sufficient statistics” that help measure aggregate outcomes out of simple firm or
household-level statistics. For instance, Davila (2016) writes down a model of household
borrowing with costs of bankruptcy. He derives the optimal bankruptcy exemption as a
function of sufficient statistics that can be observed, in particular, the reduction of consumption measured among bankrupt households and the probability of defaulting. More
closely related is recent work by Baqaee and Farhi (2017), who derive sufficient statistics
to aggregate micro-level estimates. Their approche diverges from ours in that they use a
very general aggregation framework, but, in the spirit of Restuccia and Rogerson (2008)
and Hsieh and Klenow (2009) assume distorsions can be represented by exogenous wedges
over the cost of capital. We use a simpler aggregation framework but allow wedges to vary
as they do in a large class of models. We also focus on sufficient statistics generated by
policy experiments.
Section 2 lays out the economic model. Section 3 develops our methodology. Section 4
shows that the assumptions of Section 2, which are necessary to this result, are consistent
with most of the literature on firm dynamics. Section 5 investigates the robustness of our
formulas to various extensions to the basic set-up. The last Section concludes.

5

2
2.1

The Economic Model
Set-up

The economy is dynamic (t = 0, 1, . . . , ∞), but there is no aggregate uncertainty and the
economy is assumed to be in steady state. We first consider a simple market structure and
extend the analysis to include heterogeneous industries in Section 5. At each date t, a continuum of monopolists produce imperfectly substitutable intermediate goods in quantity yit
at a price pit (Dixit and Stiglitz (1977)). There is a perfectly competitive final good market,
which aggregates intermediate output according to a CES technology:
Z

yitθ di

Y =

 θ1
(1)

,

i

where we omit the t subscript for aggregate output because the economy is in steady state.
We use the final good as the numeraire. Profit maximization in the final good market
 1−θ
1
implies that the demand for product i is given by: pit = yYit
and − 1−θ
is the price
elasticity of demand.
To produce, firms combine labor and capital according to a Cobb-Douglas production
function: yit = ezit kitα lit1−α , where kit is firm i’s capital stock in period t, lit is the labor input in
period t, α is the capital share and zit is firm i’s idiosyncratic productivity shock in period
t. With monopolistic competition and the demand system in Equation (1), firm i revenue
in period t is pit yit = Y 1−θ yitθ . We assume that there is no adjustment costs to labor so that
labor is a static input. If w is the steady state wage, static labor optimization implies that
firm i’s profit becomes:


Y

πit = pit yit − wlt = κ0
w

1−α φ
α 1−φ

1−φ

φ

e α zit kitφ ,

αθ
where φ = 1−(1−α)θ
< 1. κ0 is a function of α and φ. Productivity shocks (zit ) are Markovian
and H(zit+1 |zit ) is the c.d.f of zit+1 conditional on zit .

The capital good consists of final good – so that its price is also 1 – and it depreciates
at a rate δ. Capital investment in period t is subject to a one period time-to-build. Firms
can finance investment using the profits they realize from operations or through external
financing. The first source of outside financing is debt. bit+1 is the total real payment due
to creditors in period t + 1. To simplify notations, we define xit = (kit , kit+1 , bit , bit+1 ).
6

We introduce Θi , a vector containing all the model’s parameters for firm i. rit =r(zit , xit ; Θi , w, Y )
bit+1
is the interest rate on the loan granted at date t, so that 1+r
is the proceed from debt fiit
nancing received in period t. As will become clear, this flexible function is designed to allow
for risky debt and loss given default. We allow the firm’s investment and debt financing at
date t to be subject to adjustment costs Γ (zit , xit ; Θi , w, Y ). We also assume that firms pay
taxes and receive subsidies: T (zit , xit ; Θi , w, Y ) corresponds to the net tax paid by the firm.
The second source of outside funding is equity. The firm can raise funds from shareholders in the equity market, or distribute excess funds to shareholders: eit is the equity
issuance (if negative) or distribution (if positive) made by firm i in period t: it corresponds
to the financing gap left after all other sources of financing have been used:
eit = πit − (kt+1 − (1 − δ)kt ) − Γ (zit , xit ; Θi , w, Y )


bit+1
− bit − T (zit , xit ; Θi , w, Y )
+
1 + r(zit , xit ; Θi , w, Y )
= e(zit , xit ; Θi , w, Y )
We consider generic financing frictions. First, equity issuance may be costly, and we
note C(zit , xit ; Θi , w, Y ) these equity issuance costs. Second, the amount of outside financing may be constrained, a friction that we capture through a vector of constraint:
M (zit , xit ; Θi , w, Y ) ≤ 0.
The timing is standard in models of firm dynamics. At the beginning of period t, productivity zit is realized. The firm then combines capital in place kit with labor lit to produce
and receive the corresponding profits. It then selects the next period stock of capital kit+1 ,
pays the corresponding adjustment costs, reimburse its existing debt bit and receive the
bit+1
proceed from debt issuance 1+r
it
Omitting the it index and denoting with prime next-period variables, we can represent
firms optimization problem through the following Bellman equation:

V (z, k, b; Θ, w, Y ) =

max
e(z, x; Θ, w, Y ) − C(z, x; Θ, w, Y ) + β F Ez0 [V (z 0 , k 0 , b0 ; Θ, w, Y )|z],
0 0
k ,b

M (z, x; Θ, w, Y ) ≤ 0
(2)
where β F is the firm’s discount rate. In what follows, we assume the standard conditions
on the cost functions and the constraints so that the contraction mapping theorem applies
to this Bellman equation and there is a unique value function.
7

The household side of the economy is stripped down to its essentials. A representative
household has GHH preferences (Greenwood et al. (1988)) over consumption and leisure:

1−γ
1+ 1
lt  w̄
1
, where ct is period t consumption, lt is period t labor supply,
u(ct , lt ) = 1−γ ct − 1+ 1 1


L̄ 

 is the Frisch elasticity and (w̄, L̄) are constant. The representative household owns all
firms in the economy. β H is the representative household’s discount rate. In the absence
of aggregate uncertainty, optimal consumption and labor supply decisions imply that Lst =

w 
1
L̄ w̄
and β H = 1+r
, where r is the exogenous risk-free rate. Note that since households
1
portfolios are well diversified across firms, we also have β F = 1+r
even though the model
potentially allows for firms’ default.

2.2

Introducing capital wedges

Instead of solving the model explicitly, we will characterize its equilibrium as a function
of the distribution of objects defined as capital wedges τ which vary over time and across
firms. These wedges are defined as the ratio of a firm’s marginal revenue product of capital
to some frictionless user cost of capital R for firm i in period t. R is arbitrary but fixed
throughout the analysis. Wedges measure how much firms’ capital stock deviates from
frictionless optimization. In our model, firms potentially deviate from frictionless optimum
for three reasons: financing frictions, adjustment costs, and taxes.
Definition 1 (Definition of wedges).
1 ∂py
(z, x; Θ, w, Y )
R ∂k
αθ py(z, x; Θ, w, Y )
=
R
k

1 + τ (z, x; Θ, w, Y ) =

As previously noted in the literature, in this Cobb-Douglas framework, wedges are easy
to measure since they are proportional to the ratio of revenue to capital. Both revenue
and capital can be approximated using standard firm-level datasets containing financial
statements. A priori, wedges are complicated functions of productivity, firm-level policies
variables (debt and capital), model parameters Θ and aggregate conditions (w, Y ). In the
following, we will summarize the information on wedges through the joint distribution of
log wedges log(1+τ ) and log productivity z, whose c.d.f. we note F (z, τ ; Θ, w, Y ). This distribution reflects the fact that otherwise similar firms may have different wedges because of
8

different histories embedded in their state variables. For instance, firms who experienced
a long sequence of adverse productivity shocks have little capital and therefore little ability
to borrow, even if the current productivity goes up. Their investment decision will exhibit
a larger wedge. The c.d.f. F (z, τ ; Θ, w, Y ) also reminds us that the wedge distribution is a
priori conditional on the aggregate state of the economy (e.g., an increase in aggregate output Y may lead to firms being less constrained on average) and the parameters governing
the optimization problem they face (Θ).

2.3

Equilibrium

We now solve the competitive equilibrium of this economy in the steady state as a function
of the distribution of the capital wedges defined in Definition 1. In this simple model,
the steady state equilibrium corresponds to an equilibrium wage w that clears the labor
market and aggregate output Y that clears the final good market.
Given the definition of capital wedges τ , the static FOC in labor, we can write down the
market clearing conditions in labor and final good. We note F (z, τ ; Θ, w, Y ) the c.d.f. of log
wedges log(1 + τ ) and log productivity z.
To simplify exposition, we assume that all firms face the same parameters so Θ is the
same for all firms and therefore does not need to be indexed by i. This assumption is
not necessary but makes equations clearer. This leads to the following formulas describing
aggregate production and TFP, as in Hsieh and Klenow (2009) and Midrigan and Xu (2014):

Z



Y ∝
z,τ


TFP =

ez
(1 + τ )α

1−θ
!(1+) (1−α)θ

θ
 1−θ

dF (z, τ ; Θ, w, Y )

 1−(1−α)θ
θ
dF
(z,
τ
;
Θ,
w,
Y
)
α
z,τ (1+τ )

α
θ z
R
e 1−θ
1−(1−α)θ dF (z, τ ; Θ, w, Y )
z,τ

R



ez

(3)

θ
 1−θ

(1+τ )

(4)

1−θ

Clearly, the above equations do not solve for (w, Y ), since analytically solving the model
is in general not feasible. These two equations offer relationships between macro outcomes
(output and TFP) and the distribution of wedges, which can be observed. To make these
equation easier to apprehend, we now introduce a simplification.

9

2.4

Small Perturbation Approximation

Equations 3 and 4 show how aggregate TFP and output depend on the joint distribution of
log productivity z and wedges τ . We simplify these expressions by focusing on the following
case:
Assumption 1. Variations in z and log(1 + τ ) are small relative to their respective means.
In this multiplicative set-up, Assumption 1 is equivalent to assuming that log(1+τ ) and
z are jointly normally distributed (which is the assumption made for instance in Hsieh and

= ln(1 + τ ) + cst, Assumption 1 implies that the log revenue
Klenow (2009)). Since log py
k
to capital ratio is also normally distributed. We test the relevance of this assumption using data from BvD AMADEUS Financials for the year 2014. As in Gopinath et al. (2015),
we measure pi yit as the value added of the firm, i.e. the difference between gross output
(operating revenue) and materials. We measure the capital stock, kit , with the book value
of fixed tangible and intangible. For 9 countries in our sample (France, Italy, Spain, UK,
Portugal, Croatia, Sweden, Bulgaria and Romania), we report in Figure 1 normal probability plots, i.e. plots of the empirical c.d.f. of the standardized log revenue to capital
ratios against the c.d.f. of a normal distribution. Figure 1 shows that the log-normality
assumption is a reasonable one.
Neither of these assumptions (small deviations or log normality) is necessary to our
approach and we provide in our robustness section formulas that do not rest on it. But
assumption 1 proves useful to clarify the logic of our approach, as it summarizes the distribution of wedges in a handful of moments.
The second order Taylor expansion of equations (3-4) in log(1 + τ ) and z around their
means leads to simple formulas summarized in the following proposition:
Proposition 1. Under Assumption 1, at equilibrium, aggregate output and TFP can be
written as simple functions of three moments of the joint distribution of log wedges ln(1 + τ )
and log productivity z.



1 θ
α(1 + )
2
αστ (Θ, w, Y ) − 2στ z (Θ, w, Y ) + cst
−µτ (Θ, w, Y ) +
log Y =
1−α
21−θ


α
αθ
log(T F P ) = −
1+
στ2 (Θ, w, Y )
2
1−θ

(5)
(6)

where µτ (Θ, w, Y ) and στ2 (Θ, w, Y ) are the steady-state mean and variance of the ergodic
distribution of log capital wedges log(1 + τ ) for an economy of firms facing optimization
10

problem 2 with parameters Θ and aggregate conditions (w,Y). Similarly, στ z (Θ, w, Y ) is the
steady-state covariance between log productivity and log wedges.
Proof. See Appendix B.1.
These formulas illustrate forces already discussed in the literature. Dispersion of
wedges impairs aggregate efficiency because it creates capital misallocation (Hsieh and
Klenow (2009)). A positive correlation between productivity and wedges also hurts aggregate production: output is lower when the most productive firms experience the largest
distortions (Hopenhayn (2014)). However, in our setting, such a correlation does not affect
aggregate TFP. This result emanates from the small deviation assumption (or alternatively, from log normality). For instance, it does not hold in Restuccia and Rogerson (2008),
who use a binary distribution for the distribution of distortions.
The above formulas suggest a very simple methodology to aggregate firm-level evidence:
1. Measure the treatment effect of a policy experiment on the three moments introduced
in Proposition 1 (mean and variance of log wedges, and covariance of log wedges with
log productivity). These three moments are easy to compute using firm-level data
since log wedges are equal to log revenue-to-capital ratios up to a constant.
2. Plug these treatment effects into formulas (5-6). This would lead to the aggregate
effect (in terms of log-changes in aggregate output and TFP) of generalizing the experiment to all firms in the economy. This approach is originally the one of Hsieh
and Klenow (2009) who use the variance of log revenue to capital ratios of the US to
investigate TFP losses among Indian firms due to misallocation. It has since been
taken on in a few recent papers based on quasi-experimental frameworks (Blattner
et al. (2017), Larrain and Stumpner (2017), Rotemberg (2017)).
However, this methodology faces a challenge, well illustrated by the above formulas.
The distribution of wedges is only observed conditional on the economy’s equilibrium
(w, Y ). The inference on the joint distribution of (z, log(1 + τ )) in step 1 may thus depend on
the size of the experiment, as we expect aggregate outcomes to change as the experiment
scales up. In particular, when all firms receive the treatment, the equilibrium distribution of (z, log(1 + τ )) may differ from the distribution observed in an experimental setting
where only a fraction of firms receive the treatment. The next section details this issue
and shows a set of sufficient conditions for the model presented in this section such that
this issue does not arise and the above methodology is valid.
11

3

Inference and Aggregation of Policy Experiments

In this section, we show how to perform aggregate counterfactuals using firm-level estimates. To simplify the exposition, we assume in this section that the empirical exercise
consists of a simple binary treatment, where a random subset of firms are treated. Our
approach can easily be generalized to continuous treatments.

3.1

Definition of the Empirical Treatment

An econometrician observes data on an infinite number of firms, of which a subset is subject to an empirical treatment. The treatment is binary: firm i is either treated (Ti = 1) or
untreated (Ti = 0). This treatment is a policy that affects the parameters Θ governing financing constraints, adjustment costs or taxes. Θ0 (resp. Θ1 ) correspond to the parameters
of non-treated (resp. treated) firms. The econometrician does not necessarily know how the
treatment affects these parameters. However, we assume that she knows that the treatment leaves the following three parameters unchanged: the capital share in production α,
the price elasticity of demand θ, and the labor supply elasticity .
To be consistent with our model, we assume that the econometrician observes the ergodic distribution of firms in the economy. As a result of this assumption, we do not need
to worry about the exogeneity of the treatment: at the steady state, the model converges
to its new ergodic distribution, which is independent of initial conditions. This arises because, in our simple setting, heterogeneity only stems from temporary productivity shocks.
Our results extend directly in the presence of persistent productivity shocks, although they
require the additional assumption that the treatment is orthogonal to long-term productivity.

3.2

Aggregating the Treatment

Our goal is to aggregate the firm-level evidence gathered from the experiment. This aggregation exercise consists of measuring the effect of generalizing the policy from the subset
of treated firms to all firms in the economy. An alternative version of our aggregation exercise consists of extending the policy to just a larger fraction of firms in the economy. We
focus on full aggregation here, and explore partial aggregation in Section 5. We summarize
the total aggregation exercise in the paragraph below.

12

Objective 1 (Aggregation of the Treatment). The aggregation of the treatment consists of
computing the log-change in output and TFP when moving from an economy where no firms
are non-treated (Θ = Θ0 for all firms) to an economy where all firms are treated (Θ = Θ1 ).
Note (w0 , Y0 , T F P0 ) (resp. (w1 , Y1 , T F P1 )) the equilibrium quantities in the economy where
no firms (resp. all firms) are treated. Then:




α(1 + )
1 θ
log(Y1 ) − log(Y0 )
2
=
−∆µτ +
α∆στ − 2∆στ z
∆ log Y =
log(Y0 )
1−α
21−θ


α
αθ
log(T F P1 ) − log(T F P0 )
=−
1+
∆στ2
∆ log(T F P ) =
log(T F P0 )
2
1−θ

(7)
(8)

where:
∆µτ = µτ (Θ1 , w1 , Y1 ) − µτ (Θ0 , w0 , Y0 )
∆στ2 = στ2 (Θ1 , w1 , Y1 ) − στ2 (Θ0 , w0 , Y0 )
∆σzτ = σzτ (Θ1 , w1 , Y1 ) − σzτ (Θ0 , w0 , Y0 )
The equations above make clear the challenge faced by the econometrician. The econometrician does not directly observe the distribution of wedges and productivities conditional on the new equilibrium (w1 , Y1 ), since this new equilibrium is by definition not observed. Therefore, empirically, the econometrician cannot directly estimate ∆µτ using the
dτ , which is a
available evidence, but instead can only estimate the following statistic ∆µ
priori not equal to ∆µτ :



 


 
p
y
p
y
it
it
it
it
dτ = E log
|Ti = 1 − E log
|Ti = 0
∆µ
kit
kit
= µτ (Θ1 , w0 , Y0 ) − µτ (Θ0 , w0 , Y0 )
6= ∆µτ = µτ (Θ1 , w1 , Y1 ) − µτ (Θ0 , w0 , Y0 )

a priori

To perform the aggregation exercise stated in Objective 1, however, the econometrician
dτ . Of course, this problem is not specific to the mean
needs to estimate ∆µτ and not ∆µ
but is relevant for all moments of the joint distribution of (z, log(1 + τ )). The next Section
presents sufficient conditions under which these statistics are in fact similar.

13

3.3

Scale Invariance of the Wedge Distribution

This section presents one of our main results: we provide sufficient conditions under which
the joint distribution of wedges and productivity does not depend on the equilibrium quantities w and Y . As we detail below, the assumptions necessary to obtain this result are
satisfied in a large class of models of firm dynamics, commonly used in macro-finance.
Proposition 2 (Distribution of wedges).
Y
be the steady state “scale” of the economy. Assume that:
Let S = (1−α)φ
w (1−φ)α

1. (1) the adjustment cost Γ(), (2) taxes T (), (3) the vector of funding constraint M () and,
(4) the equity issuance cost function C()all satisfies the following property:
∀ (z, x; Θ, w, Y ),


 x
Q(z, x; Θ, w, Y ) = S × Q z, ; Θ, 1, 1
S

(9)

2. The interest rate function r() satisfies the following property:
∀ (z, x; Θ, w, Y ),

 x

r(z, x; Θ, w, Y ) = r z, ; Θ, 1, 1
S

Then, the joint-distribution of z and τ does not depend on (w, Y ):
F (z, τ ; Θ, w, Y ) ≡ F (z, τ ; Θ)
Proof. See Appendix B.2
This proposition shows that, given parameters Θ, the ergodic distribution of capital
wedges does not depend on the scale of the economy. It is the key result of the paper. It
implies that under the assumptions highlighted in Proposition 2, the wedge distribution
observed for a subset of firms operating under parameters Θ does not depend on the behavior of other firms, in particular on the parameters Θ̃ faced by other firms in the economy.
This result is necessary to be able to estimate the aggregate counterfactual presented in
Objective 1 using firm-level evidence. This result rests on two key assumptions. The first
assumption is that firm-level production is Cobb-Douglas, since the multiplicative property of Cobb-Douglas technology implies that firm-level (revenue-)productivity scales proportionally to S. The second assumption, explicitly in Proposition 2 is that frictions have
to satisfy properties that resemble homogeneity in firm policies k and b. Our assumption is
a bit more general as it only requires homogeneity with respect to S, an assumption that
14

firm’s operating profit satisfy – although they may not be strictly homogeneous. As it turns
out, these assumptions are valid in a large class of existing models of firm dynamics. We
discuss the validity of these homogeneity assumptions in greater detail in Section 4.

3.4

Taking Stock: Aggregation Formulas

In this Section, we summarize our aggregation methodology. Under the assumptions of
Proposition 2, the econometrician can proceed in two steps. First, she uses the firm-level
evidence to measure the treatment effect on the three moments introduced in Proposition
1. For instance, focusing on the average log wedge, the econometrician can estimate:



 


 
pit yit
pit yit
d
|Ti = 1 − E log
|Ti = 0
∆µτ = E log
kit
kit
= E (log (1 + τ ) |Ti = 1) − E (log (1 + τ ) |Ti = 0)
= µτ (Θ1 , w0 , Y0 ) − µτ (Θ0 , w0 , Y0 )
= µτ (Θ1 , w1 , Y1 ) − µτ (Θ0 , w0 , Y0 )
= ∆µτ

To go from the third to the fourth line in the previous equation is valid under the assumptions of Proposition 2, as the distribution of τ is then independent of w and Y . As
dτ now provides us with the relevant statistics to be
a result, the empirical estimate ∆µ
used in the aggregation exercise. The same reasoning applies to the two other moments of
Proposition 1, which can be estimated through:



 


p
y
p
y
it
it
it
it
d2 = Var log
|Ti = 1 − Var log
|Ti = 0 = ∆στ2
∆σ
τ
k
kit
  it 

 


p
y
p
y
it
it
it
it
[
∆σ
, zit |Ti = 1 − Cov log
, zit |Ti = 0 = ∆σzτ
zτ = Cov log
kit
kit




In a second step, the econometrician then plugs these three statistics into the aggregation formulas (7-8). They require prior knowledge of only three parameters: the capital
share α, the extent of competition θ and the labor supply elasticity . With these 3 parameters only, the econometrician can estimate an aggregate counterfactual which does not

15

require a full structural estimation of the firm-level problem 2 nor a precise mapping from
the treatment to the parameters Θ affected by the experiment.
A standard calibration of these parameters in the aggregation formula (7-8) is α = .33
(Bartelsman et al. (2013), θ = .8 (Broda and Weinstein (2006)) and  = .5 (Chetty (2012)).
With this calibration, the aggregation formula imply that a policy that increases investment by about 2% at the firm-level and leaves the variance of wedges as well as the correlation of wedges with productivity unchanged would increase output by .63%.3 A policy
that would leave the average wedge and the correlation of wedge and TFP unchanged, but
would reduce the dispersion of wedges by 1.29 percentage points would similarly lead to
an increase in aggregate output of .63%.

4

Relation with Standard Models of Firm Dynamics

Proposition 2 requires that the frictions faced by firms be homogeneous of degree 1. In
this section, we show that standard models of firm dynamics with frictions satisfy these
assumptions. We discuss in turn real frictions (adjustment cost), financial frictions and
taxes.

4.1

Adjustment Costs

Consider first the case of adjustment costs. Quadratic adjustment costs to capital, linear
adjustment costs, fixed costs that scale either with production, output and capital or discount for capital resale all satisfy the assumptions in Proposition 2. For instance, if Γ() is
given by:

Γ(z, x; Θ, w, Y ) = γ1

(k 0 − (1 − δ)k)2
+ γ2 k + 1{k0 −(1−δ)k6=0} (γ3 y + γ4 py + γ5 k) + γ6 k 1{k0 −(1−δ)k<0} ,
k

then, since y(z, k; Θ, w, Y ) = S × y(z, Sk ; Θ, 1, 1) and py(z, k; Θ, w, Y ) = S × py(z, Sk ; Θ, 1, 1), it is
trivial to show that Γ(z, x; Θ, w, Y ) = S × Γ(z, Sx ; Θ, 1, 1)
1−θ
The revenue to capital ratio is given by: ∆ log py
k = − 1−θ(1−α) ∆ log k, so that a 2% increase in investment
corresponds to a .85% decline in the sales-to-capital ratio (∆µτ = −.85%), which in turn leads to an increase
in aggregate output of α(1+)
1−α × .85% = .63%.
3

16

4.2

Financing Frictions

Second, consider the financing side of the model. Our formulation encompass standard
models of financing constraints and investment.
Let us start with the interest rate function. For instance, in Michaels et al. (2016) or
Gilchrist et al. (2014), debt is risky and in the event that the firm is unable to repay, the
lender can seize a fraction 1 − ζ of the firm’s fixed assets k. The firm’s future market
value is not collateralizable, so that a firm’s access to credit is mediated by a net worth
covenant, which restrains the firm’s ability to sell new debt based on its current physical
assets and liabilities. Concretely, default is triggered when net worth reaches 0, which
defines a threshold value for productivity ẑ such that:
φ

0 = κ0 S 1−φ e α ẑ k φ − b + ck (1 − δ)k,

(10)

where ck is the second-hand price of capital, which we treat as a technological parameter.
As in Michaels et al. (2016), the right side of the previous equation represents the resources
that the firm could raise in order to repay its debt just prior to bankruptcy, which is why
its capital is valued at the second-hand price ck . The wage bill is absent from the previous
equation because labor is paid in full, even if the firm subsequently defaults. Finally,
the face value of debt discounted at the interest rate r(z, x; Θ, w, Y ) must equal the debt
holder’s expected payoff discounted at the risk-free rate:

ẑ

b0
1 + r(z, x; Θ, w, Y )
0
(11)
Equations (10) and (11) provides the joint definition for the interest rate function
r(z, x; Θ, w, Y ), which satistfies the assumption in Proposition 2. Note first that equaφ
φ
tion (10) can be rewritten as: 0 = κ0 e α ẑ Sk − Sb + ck (1 − δ) Sk . As a result, it is clear that
ẑ(k, b; Θ, w, Y ) = ẑ( Sk , Sb ; Θ, 1, 1). Also, we can rewrite Equation (11) as:
1
1+r

1
1+r

Z


Z

0



κ0 S

1−φ

e

φ 0
z
α

0φ

k + (1 − ζ)(1 − δ)k

0 0ˆ
z( kS , bS ;Θ,1,1)

κ0 e

φ 0
z
α

0



0

dH(z |z) + (1 − H(ẑ|z))b

0φ

0

k
k
+ (1 − ζ)(1 − δ)
S
S

!

0



=



0

b
b
S
dH(z |z) + (1 − H(ẑ|z))
=
,
S
1 + r(z, x; Θ, w, Y )
0

0

so that r(z, x; Θ, w, Y ) = r(z, Sx ; Θ, 1, 1).
Similarly, the specification of debt renegotiation in Hennessy and Whited (2007) would

17

also satisfy these assumptions. More generally, these models make the probability of default independent of the scale of the economy S, and the loss given default proportional to S.
These properties ensure our assumption about r() in Proposition 2 is satisfied. Obviously,
models of risk-free debt, such as Midrigan and Xu (2014), also satisfy our assumption.
Our assumption on the cost of equity is also verified in Michaels et al. (2016) and
Gilchrist et al. (2014), who posit that equity issuances are subject to an underwriting fees
such that there is a positive marginal cost to issue equity:
C(z, x; Θ, w, Y ) = λ|e(z, x; Θ, w, Y )|1{e(z,x;Θ,w,Y )<0}
Given that e(z, x; Θ, w, Y ) = Se(z, Sx ; Θ, 1, 1), it is obvious that C(z, x; Θ, w, Y ) = S ×
C(z, Sx ; Θ, 1, 1). Thus, the financing frictions specified in Gilchrist et al. (2014) and Michaels
et al. (2016) satisfy the assumptions of Proposition 2. Additionally, it is obvious to see that
fixed or quadratic issuance costs would satisfy our assumptions as long as they are approe2
priately scaled with the size of the firm. For instance, ψ kitit 1eit <0 , or ιkit 1eit <0 would fall in
this category.
Finally, our formulation of financing frictions also encompasses debt constraints as
for instance in Midrigan and Xu (2014) or Catherine et al. (2017). In Midrigan and Xu
(2014), debt is assumed to be risk-free through full collateralization: b0 ≤ ξk 0 so that
r(z, x; Θ, w, Y ) = rf and producers can only issue claims to a fraction χ of their future profits: e(z, x; Θ, w, Y ) ≥ −χV (z, x; Θ, w, Y ). In this case, the vector M (z, x; Θ, w, Y ) consists of
the last two inequalities, and it is direct to see that both M and r() satisfy the assumptions
of Proposition 2. Of course, any combination of the constraints in Midrigan and Xu (2014)
and Hennessy and Whited (2007) would also satisfy these assumptions. Note also that
our model also encompasses debt constraints where debt financing is limited by existing or
future cash flows (b ≤ ιe(z, x; Θ, w, Y )).

4.3

Taxes

Standard specifications for the corporate income tax satisfy the assumption of Proposition
2: T (z, x; Θ, w, Y ) = τ max (0, π(z, x; Θ, w, Y ) − δk − b). However, a progressive tax system
would violate our assumptions.

18

5

Robustness and Extensions

This section proposes extensions to the methodology developed in Section 3 and the model
presented in Section 2.

5.1

Partial Aggregation

In some settings, the full aggregation exercise discussed in Section 3 may not be relevant,
for instance in the presence of government budget constraint. The following proposition
adapts our framework to the case of a partial aggregate counterfactual where the treatment is extended to a fraction λ < 1 of the firms in the economy. As before, the empirical
setting consists of a random 0-measure set of firms that receive a treatment Ti = 1 that
consists of a change in the parameters governing frictions (i.e Θ going from Θ0 to Θ1 ).
Proposition 3 (Partial Aggregation Formulas). Assume that the assumptions in Proposition 2 hold. In addition, assume that the effect of the treatment is small in the sense that
∆µτ , ∆στ2 and ∆στ z  1.
The procedure to compute the partial aggregation counterfactual follows three steps:
1. Estimate the following treatment effects in the data:


 


pit yit
pit yit
|Ti = 1 − E log
|Ti = 0
= E log
k
kit
  it 

 


pit yit
pit yit
= Var log
|Ti = 1 − Var log
|Ti = 0
kit
kit
 


 


pit yit
pit yit
= Cov log
, zit |Ti = 1 − Cov log
, zit |Ti = 0
kit
kit


dτ
∆µ
d2
∆σ
τ
[
∆σ
zτ



2. Compute the modified treatment effects that reflect the partial nature of this aggregation:
gτ = λ∆µ
dτ
∆µ
d2 + λ(1 − λ)(∆µ
g2 = λ∆σ
dτ )2
∆σ
τ
τ
]
[
∆σ
zτ = λ∆σzτ
3. Plug these modified treatment effects into the aggregation formulas (7-8).
Proof. See Appendix B.3.
19

The above proposition says that the formulas developed in Section 3 still apply under
partial aggregation, but the data moments have to be adapted to take into account the
fact that not all firms are treated. Quite intuitively, the effect of the differential mean
wedge has to be multiplied by the fraction actually treated in the aggregation counterfactual (λ). The same intuition directly applies to the covariance between log productivity
and log wedges. The variance of log wedges is, however, affected in a subtler way as the
result of two effect. The first effect comes from the fact the the experiment itself increase
the variance of wedges by ∆στ2 , so the overall variance increases by λ times that amount.
The second effect is specific to partial aggregation: treating only a fraction λ of firms will
generate additional misallocation between treated and non treated firms. x

5.2

Heterogeneous Industries

In this section, we consider a more general market structure than the one presented in
Section 2: the economy features industries that are heterogeneous in (1) their output share
in total output (2) their labor share (3) the degree of competition between firms within the
industry (4) the parameters that govern the firm-level dynamics of investment and hiring
and (5) potentially the treatment they receive.
More precisely, let S be the number of industries and Ms the set of firms operating
in industry s. Firms in each industry produce in monopolistic competition as in Section
R θs  θ1
1
s
y
. The
can
be
industry
specific:
Y
=
2, and the price-elasticity of demand − 1−θ
s
i is
s
final good market produces by combining each industry output according to the following
Cobb-Douglas production function:
ln(Y ) =

S
X

and

φs ln(Ys )

S
X

φs = 1.

(12)

s=1

k=1

Within industry s, the production function is given by: yit = ezit kitαs lit1−αs , i.e. the labor
share is assumed to be industry-specific, while we assume that the distribution of idiosyncratic productivity shocks is common across industries. Beyond φs , αs and θs , an industry
is also characterized by the vector of parameters that govern the frictions in the firm-level
optimization problem 2, Θs , which is now industry-specific. Finally, we also allow the binary treatment Ti ∈ {0, 1} to be industry-specific: in industry s, treated (resp. control)
firms operate under Θ = Θ1s (resp. Θ0s ). Beyond these modifications, the setting is similar
to that of Section 3.

20

In this augmented setting, the aggregate counterfactual we consider is one where, in
each industry s, the industry-specific treatment is extended to all firms in the industry
(i.e., in each industry, Θ goes from Θs0 to Θ1s ). This counterfactual can be estimated in the
following way:
Proposition 4 (Aggregating Heterogeneous Industries). Under the homogeneity assumptions of Proposition 2, the joint distribution of z and τ in industry s does not depend on w
and (Ys0 )s0 ∈[1,S] .
Define the following industry-level treatment effects:
 


 


pit yit
pit yit
d
∆µτ (s) = E log
|Ti = 1, si = s − E log
|Ti = 0, si = s
kit
kit
 


 


pit yit
pit yit
2
d
∆στ (s) = Var log
|Ti = 1, si = s − Var log
|Ti = 0, si = s
kit
kit
 


 


p
y
p
y
it
it
it
it
[
∆σ
, zit |Ti = 1, si = s − Cov log
, zit |Ti = 0, si = s
zτ (s) = Cov log
kit
kit
Extending industry-level treatments to all firms in the industry lead to a change in aggregate output of:
∆ ln Y =

X
s

α θ φ (1 + )
P s s s
s0 (1 − αs0 )θs0 φs0




θ
1
s
d2 (s) − 2∆σ
dτ (s) +
[
αs ∆σ
−∆µ
zτ (s)
τ
2 1 − θs

0

Ks
Denote κs = K
0 the share of total capital employed by industry s. With homogeneous
capital shares (αs = α) and price elasticity of demand (θs = θ), and assuming small industry
shares (φs  1), the aggregate counterfactual can be further simplified:



α(1 + ) X
1 θ  d2
d
[
∆ ln Y =
φs −∆µτ (s) +
α∆στ (s) − 2∆σzτ (s)
1−α s
21−θ




X
α
αθ
1 θ  d2
2
d
d
[
∆ log T F P = −
1+
∆στ − α(1 + αθ)
(κs − φs ) −∆µτ (s) +
α∆στ (s) − 2∆σ
zτ (s)
2
1−θ
2
1
−
θ
s
In particular, if the treatment is homogeneous across sectors, the aggregation formulas
(7-8) are unchanged.
Proof. See Appendix B.4.

21

Three remarks about Proposition 4 are in order. First, this proposition shows that,
provided the treatment is homogeneous across sectors, and capital shares and mark-ups
are identical across sectors, our main formulas remain unchanged even though industry
shares are heterogeneous. Second, if the treatment is industry-specific, the aggregation
formula for output remain close to Equation 7 derived above: the industry-specific treatment effects is simply weighted by industry shares φs . The aggregation formula for TFP,
however, exhibit an additional first-order term relative to the one-industry case in Equation 8, which arises because across industry distortions may be present in the baseline
economy. Intuitively, some industries may be “too large” in terms of capital employed relative to the undistorted optimum (κs > φs ): in this case, if distortions decrease relatively
more in these industries as a result of the treatment, aggregate TFP increase. Finally, if
capital shares and mark-ups are industry-specific, the aggregation formula for output is a
simple weighted-average of the one-industry aggregation formula in Equation (7).

5.3

Decreasing returns to scale

In this section, we extend our baseline model to allow for decreasing technological returns
to scale (span of control): yit = ezit (kitα lit1−α )ν where ν < 1. The aggregation formulas are then
similar to those in our baseline case, with minor modifications:
Proposition 5. With decreasing technological returns to scale ν and under the homogeneity
assumptions of Proposition 2, the joint-distribution of z and τ does not depend on (w, Y ).
With decreasing returns to scale, the aggregation formulas become:



1
νθ
αν (1 + )
2
d
dτ +
[
−∆µ
α∆στ − 2∆σ
∆ log(Y ) =
zτ
(1 − α)ν + (1 + )(1 − ν)
2 1 − νθ


αν
ανθ
d2 ,
∆ log(T F P ) = −
1+
∆σ
τ
2
1 − νθ
d2 , ∆σ
dτ , ∆σ
[
where ∆µ
zτ are the same treatment effects defined in Section 3.4.
τ
Proof. See Appendix B.5.
The modifications introduced by decreasing returns to scale are marginal. Proposition
5 makes clear that our approach also applies to models of perfect competition (θ = 1)
and decreasing returns to scale such as Hopenhayn (2014) or Midrigan and Xu (2014).

22

It also makes clear that the modifications induced by decreasing returns to scale ν < 1 will
quantitatively be small, since ν is typically close to 1.

5.4

Non-parametric Formulas

Finally, we explore here the effect of relaxing the assumption of small variations in distortions and productivity. It turns out that simple formulas, similar to (7-8) can be developed.
These formulas rely more heavily on the Cobb-Douglas nature of production, but present
the advantage that they do not require the estimation of firm-level TFP shocks z.
Proposition 6.
Consider the baseline framework of Section 2. Assume that the assumptions in Proposition
2 hold.
Define the following treatment effects for labor and capital:
(

c = ln (E[lit |Ti = 1) − ln (E[lit |Ti = 0])
∆l
c = ln (E[kit |Ti = 1]) − ln (E[kit |Ti = 0])
∆k

Then, the effect of generalizing the treatment to all firms in the economy on aggregate
output and TFP is given by the following formulas:

(1 + )(1 − θ) c


 ∆ log Y = (1 − α)θ × ∆l



1

c − α × ×∆k
c
 ∆ log T F P =
− (1 − α) × ∆l
θ
Proof. See Appendix B.6.
The formulas in Proposition 6 are intuitive and simply leverage the fact that reduction
in distortions due to the treatment translates into changes in input use. The appeal of these
formula is that they do not require assumptions about the joint-distribution of productivity
and wedges, or equivalently, assumption about the size of variations of productivity and
wedges. However, these formulas may be unpractical from an empirical standpoint: with
log-normally distributed labor and capital, estimating treatment effects in levels is likely
to be inconsistent.

23

6

Conclusion

This paper develops a simple sufficient statistics framework to aggregate well-identified
firm-level evidence of policy experiments aiming to reduce frictions faced by firms. The
methodology proceeds in two steps: (1) using firm-level data, the econometrician estimates
the treatment effect of the policy on moments of the joint distribution of productivity and
capital wedges (2) these treatment effects are applied to all firms in a general equilibrium
model of firm dynamics with real frictions, financial frictions and taxes. Our approach
yields simple aggregation formula, that can easily be estimated in (quasi-)experimental
settings. These formula can easily be extended to more complex economies (e.g, allowing
decreasing returns to scale or heterogeneous industries) or partial aggregation exercises
where all firms do not receive the treatment.
While variants of this methodology have been used in recent applied work, our paper
explicits a set of conditions under which such an approach is valid: (1) intermediate inputs
are combined with (nests of) CES aggregators (2) production takes place according to a
Cobb-Douglas technology combining labor and capital (3) capital adjustment costs, financing frictions and taxes satisfy a type of homogeneity condition. While these assumptions
may appear restrictive, they are satisfied by a large class of models commonly used in the
macro-finance literature.

24

References
A GHION, P., T. FALLY, AND S. S CARPETTA (2007): “Credit constraints as a barrier to the
entry and post-entry growth of firms,” Economic Policy, 22.
B ANERJEE , A. V. AND E. D UFLO (2014): “Do Firms Want to Borrow More? Testing Credit
Constraints Using a Directed Lending Program,” The Review of Economic Studies, 81,
572–607.
B AQAEE , D. AND E. FARHI (2017): “Productivity and Misallocation in General Equilibrium,” Tech. rep.
B ARTELSMAN, E., J. H ALTIWANGER , AND S. S CARPETTA (2013): “Cross-Country Differences in Productivity: The Role of Allocation and Selection,” American Economic Review,
103, 305–334.
B ERTRAND, M., A. S CHOAR , AND D. T HESMAR (2007): “Banking Deregulation and Market
Structure: Evidence from France,” Journal of Finance.
B LATTNER , L., L. FARINHA , AND F. R EBELO (2017): “When Losses Turn into Loans: The
Cost of Undercapitalized Banks,” Tech. rep.
B RODA , C. AND D. W EINSTEIN (2006): “Globalization and the Gains from Variety,” Quarterly Journal of Economics, 121, 541–585.
B ROWN, J. D. AND J. E ARLE (2017): “Finance and growth at the Firm Level: Evidence
from SBA loans,” The Journal of Finance, 72.
C ATHERINE , S., T. C HANEY, Z. H UANG, D. S RAER ,
Effects of Collateral Constraints,” Tech. rep.

AND

D. T HESMAR (2017): “Aggregate

C HETTY, R. (2012): “Bounds on Elasticities with Optimization Frictions: A Synthesis of
Micro and Macro Evidence on Labor Supply,” Econometrica, 80, 969–1018.
D AVILA , E. (2016): “Using Elasticities to Derive Optimal Bankruptcy Exemptions,” Tech.
rep.
D IXIT, A. K. AND J. E. S TIGLITZ (1977): “Monopolistic Competition and Optimum Product
Diversity,” American Economic Review, 67, 297–308.

25

F RAISSE , H., M. L Ê ,
ments,” Tech. rep.

AND

D. T HESMAR (2017): “The Real Effects of Capital Require-

G ILCHRIST, S., J. W. S IM , AND E. Z AKRAJ ŠEK (2014): “Uncertainty, Financial Frictions,
and Investment Dynamics,” NBER Working Papers 20038, National Bureau of Economic
Research, Inc.
G OPINATH , G., S. K ALEMLI -O ZCAN, L. K ARABARBOUNIS, AND C. V ILLEGAS -S ANCHEZ
(2015): “Capital Allocation and Productivity in South Europe,” Tech. rep.
G REENWOOD, J., Z. H ERCOWITZ , AND G. W. H UFFMAN (1988): “Investment, Capacity
Utilization, and the Real Business Cycle,” American Economic Review, 78, 402–417.
H ENNESSY, C. A. AND T. M. W HITED (2007): “How Costly Is External Financing? Evidence from a Structural Estimation,” The Journal of Finance, 62, 1705–1745.
H OPENHAYN, H. (2014): “On the Measure of Distortions,” Tech. rep.
H SIEH , C.-T. AND P. K LENOW (2009): “Misallocation and Manufacturing TFP in China
and India,” Quarterly Journal of Economics.
L ARRAIN, M. AND S. S TUMPNER (2017): “Capital Account Liberalization and Aggregate
Productivity: The Role of Firm Capital Allocation,” The Journal of Finance.
L ELARGE , C., D. S RAER , AND D. T HESMAR (2010): “Entrepreneurship and Credit Constraints: Evidence from a French Loan Guarantee Program,” Lerner and Schoar Eds:
International Differences in Entrepreneurship.
M ICHAELS, R., T. B. PAGE , AND T. M. W HITED (2016): “Labor and Capital Dynamics
under Financing Frictions,” .
M IDRIGAN, V. AND D. X U (2014): “Finance and Misallocation: Evidence from Plant-Level
Data,” American Economic Review.
R AUH , J. (2006): “Investment and Financing Constraints: Evidence from the Funding of
Corporate Pension Plans,” Journal of Finance.
R ESTUCCIA , D. AND R. R OGERSON (2008): “Policy Distortions and Aggregate Productivity
with Heterogeneous Establishments,” Review of Economic Dynamics.
R OTEMBERG, M. (2017): “Equilibrium Effects of Firm Subsidies,” Tech. rep.
26

YAGAN, D. (2015): “Capital Tax Reform and the Real Economy: The Effects of the 2003
Dividend Tax Cut,” American Economic Review.
Z WICK , E. AND J. M AHON (2015): “Tax Policy and Heterogeneous Investment Behavior,”
Tech. rep.

27

A

Figures and Tables
Figure 1: Normal probability plot of log-MRPK for firms in Amadeus

Source: BvD AMADEUS Financials, 2014. Note: This figure shows normal probability
plots for 6 OECD countries (France, Spain, Italy, Portugal, Romania and Sweden) for the
distribution of log-MRPK. Log-MRPK is computed as the ratio of value added (operating
revenue minus materials) and total fixed assets.

28

B

Proofs

B.1

Proof of Proposition 1

First, note µτ = Eτ , στ2 = Varτ and σzτ = Cov(z, τ ). Since the distribution of wedges is a function of Θ and
the aggregate equilibrium (w, Y ), so are these moments, but we omit the dependence to ease notations.
We start with aggregate production (3):

1−θ
log Y = (1 + )
log
(1 − α)θ
Note δτ = log(1 + τ ) − µτ , and u =



Z
z,τ

ez
(1 + τ )α

θ
 1−θ

θ
1−θ



Z
z,τ

ez
(1 + τ )α

θ
 1−θ

dF (z, τ ; Θ, w, Y )

(z − αδτ ). Then:

 αθ

dF (z, τ ; Θ, w, Y ) = E e− 1−θ µτ +u
αθ

= e− 1−θ µτ u


u2
≈e
E 1+u+
2


αθ
Varu
≈ e− 1−θ µτ 1 +
2
!

2

αθ
1
θ
µτ
− 1−θ
2
2 2
1+
σz − 2ασzτ + α στ
≈e
2 1−θ
αθ
− 1−θ
µτ

so that:

Z
log
z,τ



ez
(1 + τ )α

θ
 1−θ

!

2

αθ
1
θ
2
2 2
dF (z, τ ; Θ, w, Y ) ≈ −
µτ + log 1 +
σz − 2ασzτ + α στ
1−θ
2 1−θ

2

1
θ
αθ
µτ +
σz2 − 2ασzτ + α2 στ2
≈−
1−θ
2 1−θ

which leads to the result. Computation of the TFP formula follows the same logic.

29

B.2

Proof of Proposition 2

Remember that equity issuance / distributions are given by:

eit

=

where St =


 1−α
α φ
φ
α
(1 − α)φ
φ
St1−φ e α zit kit
− (kt+1 − (1 − δ)kt ) − Γ (zit , xit ; Θ, wt , Yt )
α + (1 − α)φ α + (1 − α)φ


bit+1
+
− bit − T (zit , xit ; Θ, wt , Yt ),
1 + r(zit , xit ; Θ, wt , Yt )

Yt
(1−α)φ
α(1−φ)
wt

eit

. By combining the different assumptions in Proposition 2, we get that:


 1−α
 φ
α φ
φ
kt+1
(1 − α)φ
kit
kt
α
zit
α
−(
e
− (1 − δ) )
= St
α + (1 − α)φ α + (1 − α)φ
St
St
St
!
!


bit+1
bit
xit
xit
St
−
− T (zit ,
− Γ zit ,
; Θ, 1, 1 +
; Θ, 1, 1)
St
1 + r(zit , xSitt ; Θ, 1, 1)
St
St

Therefore, e(zit , xit ; Θ, wt , Yt ) = St e(zit , xSitt ; Θ, 1, 1). Since the equity issuance cost C() also satisfies property 9, the flow variable in the Bellman equation 2 can be rewritten as:


xit
xit
; Θ, 1, 1) − C(zit ,
; Θ, 1, 1)
e(z, x; Θ, w, Y ) − C(z, x; Θ, w, Y ) = S × e(zit ,
St
St
We now consider the steady-state of this economy: wt = wt+1 = w and Yt = Yt+1 = Y . The Bellman
equation 2 becomes:

V (z, k, b; Θ, w, Y ) =

e(z, x; Θ, w, Y ) − C(z, x; Θ, w, Y ) +
max
0 0
k ,b

Ez0 [V (z 0 , k 0 , b0 ; Θ, w, Y )|z]
1 + rf

M (z, x; Θ, w, Y ) ≤ 0
Let B be the Bellman operator:

Bf (z, k, b; Θ, w, Y ) =

max
e(z, x; Θ, w, Y ) − C(z, x; Θ, w, Y ) +
0 0
k ,b

Ez0 [f (z 0 , k 0 , b0 ; Θ, w, Y )|z]
1 + rf

M (z, x; Θ, w, Y ) ≤ 0
Consider the set of functions F such that for all (z, k, b; Θ, w, Y ), f (z, k, b; Θ, w, Y ) = S × f (z, Sk , Sb ; Θ, 1, 1).

30

If f ∈ F, then Bf ∈ F:
0

Bf (z, k, b; Θ, w, Y )

=

max
S×
0 0
k ,b

0

Ez0 [f (z 0 , kS , bS ; Θ, 1, 1)|z]
x
x
e(z, ; Θ, 1, 1) − C(z, ; Θ, 1, 1) +
S
S
1 + rf

!

x
; Θ, 1, 1) ≤ 0
S
0
0
Ez0 [f (z 0 , kS , bS ; Θ, 1, 1)|z]
k k 0 b b0
k k 0 b b0
max
e(z,
,
,
,
;
Θ,
1,
1)
−
C(z,
,
,
,
;
Θ,
1,
1)
+
k0 ,b0
S S S S
S S S S
1 + rf
= S×
k k 0 b b0
M (z, , , , ; Θ, 1, 1) ≤ 0
S S S S
k
b
k
b
Ez0 [f (z 0 , k 0 , b0 ; Θ, 1, 1)|z]
max
e(z, , k 0 , , b0 ; Θ, 1, 1) − C(z, , k 0 , , b0 ; Θ, 1, 1) +
0
0
k ,b
S
S
S
S
1 + rf
= S×
k
b
M (z, , k 0 , , b0 ; Θ, 1, 1) ≤ 0
S
S
k b
=
S × Bf (z, , ; Θ, 1, 1)
S S
M (z,

Since the contraction mapping theorem applies and F is a compact space, this implies that the value function
V also belongs to F:
k b
V (z, k, b; Θ, w, Y ) = S × V (z, , ; Θ, 1, 1).
S S
The previous equations also show that, in an economy with scale (w, Y ), if (k 0 , b0 ) are the optimal policies for
0
0
a firm with state variable (z, k, b), then ( kS , bS ) are the optimal policies for a firm with state variables (z, Sk , Sb )
and in the economy with scale (w = 1, Y = 1). As a result, the ergodic distribution of Sk in the economy (w, Y )
is equal to the ergodic distribution of k in the economy (1, 1).
Remember that, by definition in the steady-state, capital wedges are equal to:
(1 + τit ) =

φ
αφ
αθ pit yit
=
e α zit
rf + δ kit
(α + (1 − α)φ)(rf + δ)



kit
S

φ

Since the ergodic distribution of ( Sk ) in the economy (w, Y ) is the same as the ergodic distribtion of k in
the economy (1, 1) and since the distribution of z is independent of (w, Y ), this implies that, in the steady
state, the distribution of wedges τit does not depend on (w, Y ) and can be written G(τi ; Θ).

B.3

Proof of Proposition 3

With heterogenous firm models, formulas (3-4) change a little bit. Let λ be the fraction of firms with Θ1 and
1 − λ the fraction of firms with Θ0 . Then, aggregate output writes:

log Y = (1 + )

1−θ
log (λM (Θ1 , w, Y ) + (1 − λ)M (Θ0 , w, Y ))
(1 − α)θ

where we note:

31

Z



log M (Θ, w, Y ) =
z,τ

ez
(1 + τ )α

αθ
1
=−
µτ +
1−θ
2

θ
 1−θ

dF (z, τ ; Θ, w, Y )


θ
1−θ

2

σz2 − 2ασzτ + α2 στ2



Since:
"

1
αθ
∆µτ +
log M (Θ1 , w, Y ) = log M (Θ0 , w, Y ) + −
1−θ
2
|



#
2

θ
−2α∆σzτ + α2 ∆στ2
1−θ
{z
}
=∆

we have that:



1−θ
log (1 − λ)elog M (Θ0 ,w,Y ) + λelog M (Θ1 ,w,Y )
(1 − α)θ

1−θ
log 1 − λ + λe∆
= log Y0 + (1 + )
(1 − α)θ


1−θ
λ(1 − λ) 2
≈ log Y0 + (1 + )
λ∆ +
∆
(1 − α)θ
2

log Y = (1 + )

since ∆µτ , ∆στ2 and ∆στ z  1. We then substitute the expression of ∆, neglect terms beyond order 2, and
obtain the formula for output in the proposition. The proof for aggregate TFP follows the same logic.

B.4

Proof of Proposition 4

First, notice that profit maximization of the final sector leads to:
ps Ys = φs Y
and the FOC in labor nicely aggregates into:
!
wL =

X

θs φs (1 − αs ) Y

s

while industry-level aggregator leds to the following firm-level demand curve:
pi = ps Ys1−θs yiθs −1

32

We then start with the firm-level relations and omit the time subscripts:
θs (1 − αs )pi yi
w
θs αs pi yi
ki =
R(1 + τi )
li =

which we plug back into the definition of revenue to obtain:
1
1−θs

pi yi ∝ ps

θs

e 1−θs zi

Ys
w

(1−αs )θs
1−θs

α s θs

(1 + τi ) 1−θs

Aggregating at the industry level, we obtain that:
Ys ∝ Y Js1−θs

1
w(1−αs )θs

where:

Z

zθs

!

e (1−θs )

αs θs dF (z, τ )
(1 + τi ) 1−θs



θs αs
1 θs
≈
αστ2 − 2σzτ
−µτ +
1 − θs
2 1 − θs
{z
}
|

log Js = log

As

assuming small deviations of τ and z around their means.
P
We then reaggregate at the economy level using log Y = s φs log Ys and the fact that Y ∝ wL so as to
obtain:

log

X
Y
φs αs θs
P
As
= cst +
φ
L
s0 s0 θs0 (1 − αs0 )
s

differentiating and taking into account the fact that Y ∝ w1+ leads to the equation for Y .
We now turn to aggregate TFP. We start from the following natural definition:
!

log T F P =

X
s

We thus need to focus on log

Y
K.

!

Y
φs (1 − αs ) log +
L

X

φs αs

s

Start from the fact that:
θs

1
pi yi
e 1−θs zi
ki ∝
∝ ps1−θs Ys (1−αs )θs
αs θs
1 + τi
w 1−θs (1 + τi )1+ 1−θs

which we aggregate at the sector level into:

33

log

Y
K

Ks ∝ Ys

Is
Js

where:

zθs

Z

!

e (1−θs )

log Is = log

αs θs dF (z, τ )
(1 + τi )1+ 1−θs



 1
θs αs
1 θs
≈ 1+
αστ2 − 2σzτ + στ2
−µτ +
1 − θs
2 1 − θs
2



2
σ
αs θs
As + τ
≈ 1+
1 − θs
2

Hence:


 2
X
Ks
αs θs
στ
φs0 αs0 θs0
P
log
= cst + 1 +
+ (1 + αs θs ) As − (1 − αs )θs
As0
Y
1 − θs 2
φ
00
s00 θs00 (1 − αs00 )
s
0
s

Differentiating and linearizing log

K
Y ,

we obtain:

X K0
K
s
∆ log
≈
0
Y
K
s

Ks
1
∆ log
+
Y
2



K0
1 − s0
K


2 !
Ks
∆ log
Y

which lead to a large, ugly formula for TFP.
K0
Assume that αs = α, θs = α. Note κs = Ks0 the capital share of each sector in the control economy where
no firm is treated. In this case:
∆ log

Y
α X
=
φs ∆As
L
1−α s

and:

∆ log

1
K
=−
Y
2


1+

αs θs
1 − θs



∆στ2 + α(1 + αθ)

X

(φs − κs )∆As

s

X
1X
+
κs (1 − κs ) (1 + αθ)∆As − αθ
φs0 ∆As0
2 s
0

!2

s

We further assume that industries are small, which allows us to neglect the last term:
∆ log T F P = −

α
2


1+

αθ
1−θ



∆στ2 + α(1 + αθ)

X
s

which leads to the formula in the proposition.

34

(φs − κs )∆As

B.5

Proof of Proposition 5

We first show that Proposition 2 still holds with decreasing returns to scale.
With monopolistic competition and decreasing returns to scale, for a firm i with a stock of capital kit ,
operating profits after optimizing labor demand are given by:

pi yi − wli

(1 − (1 − α)νθ)

=

(1 − α)νθ
w

(1−α)νθ
 1−(1−α)νθ

Y

1−θ
1−(1−α)νθ

(1−α)νθ

θ

= S × (1 − (1 − α)νθ) ((1 − α)νθ) 1−(1−α)νθ ezi 1−(1−α)νθ

where S =

Y

1−θ(1−αν)
1−(1−α)νθ
νθ

θ

ανθ

ezi 1−(1−α)νθ ki1−(1−α)νθ


ki
S

ανθ
 1−(1−α)νθ

.

w 1−(1−α)νθ

It follows directly from the proof of Proposition 2 that in this economy, and under the assumptions of
Proposition 2, the ergodic joint distribution of capital wedges and productivity is independent of (w, Y ) and
depend only on the parameters Θ. Let F (z, τ ; Θ) denote this distribution as before.
With decreasing returns to scale ν, profit maximization for firm i in industry s as a function of a capital
wedge τis leads to:

  ν(1−α)θ

 1−(1−α)νθ

1−νθ
1−νθ
1−θ
θ

1
1
z

i

Y 1−νθ e 1−νθ
 ki ∝ w
(1 + τ )
i

  1−ανθ

1−θ

1


Y
 li ∝
w

1−θ
1−νθ

θ

ezi 1−νθ



1
(1 + τi )

ανθ
 1−νθ

Firm i output at the optimum is given by:

pi yi ∝ Y

1−θ
1−νθ

ανθ
  (1−α)νθ

 1−νθ
1−νθ
θ
1
1
ezi 1−νθ
w
1 + τi

(13)

Omiting the i subscripts, equilibrium on the product market implies that:

w∝Y

1−ν
− (1−α)ν

1−νθ
! (1−α)νθ

θ

ez 1−νθ

Z

ανθ

z,τ

dF (z, τ ; Θ)

(1 + τ ) 1−νθ

Equilibrium on the labor market implies that Y ∝ w1+
Combining these two equations provides the following expression for aggregate output:
Z
Y

∝

ανθ

(z,τ )

(1+)(1−νθ)
! θ((1−α)ν+(1+)(1−ν))

θ

ez 1−νθ

dF (z, τ ; Θ)

(1 + τ ) 1−νθ

which then leads to the expression in the proposition after Taylor expansion.
Finally, aggregate TFP admits a simple expression:

35

(14)

TFP =

Y
K αν L(1−α)ν
Z

=

! 1−(1−α)νθ
θ

θ

z 1−νθ
ανθ

z,τ

z 1−νθ

dF (z, τ ; Θ)

(1 + τ ) 1−νθ

!−αν

θ

Z
z,τ

(1 + τ )

1−(1−α)νθ
1−νθ

dF (z, τ ; Θ)

which then leads to the formula in the proposition after straightforward Taylor expansion.

B.6

Proof of Proposition 6

Optimal labor demand as a function of firm-level capital wedge is:
αθ
  1−αθ

 1−θ
θ
1 1−θ
1
zi
1−θ
li ∝
Ye
w
(1 + τi )

Assume treated firms are a zero-measure set. Then, the following sufficient statistic can be computed for
both the treatment and control groups:
θ

Z
E[li |Ti = T ] ∝

e 1−θ
αθ

z,τ

(1 + τ ) 1−θ

dF (z, τ, ΘT )

where T ∈ {0, 1}.
We now introduce the log difference in mean employment:
c = log (E[li |Ti = 1]) − log (E[li |Ti = 0])
∆l
θ
θ
Z
Z
e 1−θ
e 1−θ
dF
(z,
τ,
Θ
)
−
log
= log
1
αθ
αθ dF (z, τ, Θ0 )
z,τ (1 + τ ) 1−θ
z,τ (1 + τ ) 1−θ
Given the output equation (3), it follows directly that
∆ log Y =

(1 + )(1 − θ) c
∆l
(1 − α)θ

We now compute TFP, which requires calculating the capital stock. Similarly, optimal capital demand
implies that:
  (1−α)θ

 1−(1−α)θ
1−θ
1−θ
θ
1
1
zi
1−θ
ki ∝
Ye
w
1 + τi
Like for employment, we use this to compute the new capital sufficient statistic:
c = log (E[ki |Ti = 1]) − log (E[ki |Ti = 0])
∆k
θ
θ
Z
Z
e 1−θ
e 1−θ
= log
dF
(z,
τ,
Θ
)
−
log
1
αθ
αθ dF (z, τ, Θ0 )
1+ 1−θ
1+ 1−θ
z,τ (1 + τ )
z,τ (1 + τ )

36

c and ∆k
c can be straightforwardly combined into the formula given in the
Given the TFP formula (4), ∆l
proposition.

37

